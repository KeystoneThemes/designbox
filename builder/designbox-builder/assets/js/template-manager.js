!function(t){"use strict";({instance:[],templateId:0,init:function(){this.renderPopup(),t("body.post-type-wdb-addons-template #wpcontent").on("click",".page-title-action, .row-title, .row-actions .edit > a",this.openPopup),t(document).on("click",".wdb-addons-body-overlay,.wdb-addons-template-edit-cross",this.closePopup).on("click",".wdb-addons-tmp-save",this.savePost).on("click",".wdb-addons-tmp-elementor",this.redirectEditPage).on("click",".wdb-tmp-status-switch input",this.saveTmpStatus)},renderPopup:function(e){var a;a=wp.template("wdb-addons-ctppopup")({templatetype:WDB_CPT.templatetype,hflocation:WDB_CPT.hflocation,editor:WDB_CPT.editor,heading:WDB_CPT.labels}),t("body").append(a)},openPopup:function(e){e.preventDefault();var a=t(this).closest("tr").attr("id"),o=null,n=null;a&&(n="post.php?post="+(o=a.replace("post-",""))+"&action=elementor"),t(".wdb-addons-tmp-save").attr("data-tmpid",o),t(".wdb-addons-tmp-elementor").attr({"data-link":n,"data-tmpid":o}),o?t.ajax({url:WDB_CPT.ajaxurl,data:{action:"wdb_get_template",nonce:WDB_CPT.nonce,tmpId:o},type:"POST",beforeSend:function(){},success:function(e){document.querySelector("#wdb-addons-template-type option[value='"+e.data.tmpType+"']").selected="true",t("#wdb-addons-template-title").attr("value",e.data.tmpTitle),t(".wdb-addons-tmp-elementor").removeClass("disabled").removeAttr("disabled","disabled")},complete:function(t){},error:function(t){console.log(t)}}):t(".wdb-addons-tmp-elementor").addClass("button disabled").attr("disabled","disabled"),t(".wdb-addons-template-edit-popup-area").addClass("open-popup"),t(document).trigger("wdb_template_edit_popup_open")},closePopup:function(e){t(".wdb-addons-template-edit-popup-area").removeClass("open-popup")},savePost:function(e){var a=t(this),o=e.target.dataset.tmpid?e.target.dataset.tmpid:"",n=t("#wdb-addons-template-title").val(),d=t("#wdb-addons-template-type").val();t.ajax({url:WDB_CPT.ajaxurl,data:{action:"wdb_save_template",nonce:WDB_CPT.nonce,tmpId:o,title:n,tmpType:d},type:"POST",beforeSend:function(){a.text(WDB_CPT.labels.buttons.save.saving),a.addClass("updating-message")},success:function(e){if(""==o){if(e.data.id)var a="post.php?post="+e.data.id+"&action=elementor";t(".wdb-addons-tmp-save").attr("data-tmpid",e.data.id),t(".wdb-addons-tmp-elementor").attr({"data-link":a,"data-tmpid":e.data.id}),t(".wdb-addons-tmp-elementor").removeClass("disabled").removeAttr("disabled","disabled")}},complete:function(e){t("body.post-type-woolentor-template").removeClass("loading"),a.removeClass("updating-message"),a.text(WDB_CPT.labels.buttons.save.saved)},error:function(t){console.log(t)}})},saveTmpStatus:function(e){var a=t(this),o=a.is(":checked")?a.val():"0",n=a.attr("class").replace("wdb-status-","");t.ajax({url:WDB_CPT.ajaxurl,type:"POST",data:{action:"wdb_manage_temp_status_template",nonce:WDB_CPT.nonce,tmpId:o,tmpType:n},success:function(e){var a=t("#post-"+o+" .wdb-tmp-status-switch").find(".wdb-status-"+n);"0"!=e.data.id?(t(".type-wdb-addons-template:not(#post-"+o+") .column-status").find(".wdb-status-"+n).prop("checked",!1),a.prop("checked",!0)):a.prop("checked",!1)},error:function(t){console.log(t)}})},redirectEditPage:function(e){e.preventDefault();var a=t(this),o=a.data("link")?a.data("link"):"";window.location.replace(WDB_CPT.adminURL+o)}}).init()}(jQuery);